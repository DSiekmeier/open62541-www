<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>NodeStore</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">NodeStore<div class="ingroups"><a class="el" href="group__server.html">Server</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Stores the nodes in the address space. Internally, it is based on a hash-map that maps nodes to their nodeid. </p>
<p>Nodes need to be allocated on the heap before adding them to the nodestore with. When adding, the node is copied to a new (managed) location in the nodestore and the original memory is freed. The nodes in the nodestore are immutable. To change the content of a node, it needs to be replaced as a whole.</p>
<p>Every node you _get from the nodestore needs to be _released when it is no longer needed. In the background, reference counting is used to know if somebody still uses the node in multi-threaded environments. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__external__nodestore"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__external__nodestore.html">External Nodestore</a></td></tr>
<tr class="memdesc:group__external__nodestore"><td class="mdescLeft">&#160;</td><td class="mdescRight">An external application that manages its own data and data model. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga6a58ef1e1f4671734067273d69a4dec6"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a></td></tr>
<tr class="separator:ga6a58ef1e1f4671734067273d69a4dec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2406d8a3106abcf870ffab53ee608087"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga2406d8a3106abcf870ffab53ee608087">UA_NodeStore_nodeVisitor</a>) (const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *node)</td></tr>
<tr class="separator:ga2406d8a3106abcf870ffab53ee608087"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga24dbca297c72477ab2144076ec807307"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga24dbca297c72477ab2144076ec807307">UA_NodeStore_new</a> (void)</td></tr>
<tr class="separator:ga24dbca297c72477ab2144076ec807307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga754d4517ad53cb4286592713d9981152"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga754d4517ad53cb4286592713d9981152">UA_NodeStore_delete</a> (<a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns)</td></tr>
<tr class="separator:ga754d4517ad53cb4286592713d9981152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5ecf7898b113ff25997346ede4a0ca9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gae5ecf7898b113ff25997346ede4a0ca9">UA_NodeStore_insert</a> (<a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *node, const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> **inserted)</td></tr>
<tr class="separator:gae5ecf7898b113ff25997346ede4a0ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac45871330d61a5cf82c53c93d9ce953e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gac45871330d61a5cf82c53c93d9ce953e">UA_NodeStore_replace</a> (<a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *oldNode, <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *node, const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> **inserted)</td></tr>
<tr class="separator:gac45871330d61a5cf82c53c93d9ce953e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f17e438ced10fd4c1f035a930acd23a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga6f17e438ced10fd4c1f035a930acd23a">UA_NodeStore_remove</a> (<a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, const <a class="el" href="group__types.html#structUA__NodeId">UA_NodeId</a> *nodeid)</td></tr>
<tr class="separator:ga6f17e438ced10fd4c1f035a930acd23a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga095dd91bcde9da3fe6738beae5dc60ed"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga095dd91bcde9da3fe6738beae5dc60ed">UA_NodeStore_get</a> (const <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, const <a class="el" href="group__types.html#structUA__NodeId">UA_NodeId</a> *nodeid)</td></tr>
<tr class="separator:ga095dd91bcde9da3fe6738beae5dc60ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafd9cf3d444706dffe43d38ae76fe2b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gaafd9cf3d444706dffe43d38ae76fe2b8">UA_NodeStore_release</a> (const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *managed)</td></tr>
<tr class="separator:gaafd9cf3d444706dffe43d38ae76fe2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bf247b62795b6a53bb551124a41e4f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga3bf247b62795b6a53bb551124a41e4f1">UA_NodeStore_iterate</a> (const <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, <a class="el" href="group__nodestore.html#ga2406d8a3106abcf870ffab53ee608087">UA_NodeStore_nodeVisitor</a> visitor)</td></tr>
<tr class="separator:ga3bf247b62795b6a53bb551124a41e4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga6a58ef1e1f4671734067273d69a4dec6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga2406d8a3106abcf870ffab53ee608087"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* UA_NodeStore_nodeVisitor) (const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *node)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A function that can be evaluated on all entries in a namespace via UA_NodeStore_iterate. Note that the visitor is read-only on the nodes. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga754d4517ad53cb4286592713d9981152"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UA_NodeStore_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete the namespace and all nodes in it </p>

</div>
</div>
<a class="anchor" id="ga095dd91bcde9da3fe6738beae5dc60ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a>* UA_NodeStore_get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__types.html#structUA__NodeId">UA_NodeId</a> *&#160;</td>
          <td class="paramname"><em>nodeid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve a node (read-only) from the namespace. Nodes are immutable. They can only be replaced. After the Node is no longer used, the locked entry needs to be released. </p>

</div>
</div>
<a class="anchor" id="gae5ecf7898b113ff25997346ede4a0ca9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a> UA_NodeStore_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> **&#160;</td>
          <td class="paramname"><em>inserted</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inserts a new node into the namespace. If the nodeid is zero, then a fresh numeric nodeid from namespace 1 is assigned. The memory of the original node is freed and the content is moved to a managed (immutable) node. If inserted is not NULL, then a pointer to the managed node is returned (and must be released). </p>

</div>
</div>
<a class="anchor" id="ga3bf247b62795b6a53bb551124a41e4f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UA_NodeStore_iterate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga2406d8a3106abcf870ffab53ee608087">UA_NodeStore_nodeVisitor</a>&#160;</td>
          <td class="paramname"><em>visitor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Iterate over all nodes in a namespace. </p>

</div>
</div>
<a class="anchor" id="ga24dbca297c72477ab2144076ec807307"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a>* UA_NodeStore_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new namespace </p>

</div>
</div>
<a class="anchor" id="gaafd9cf3d444706dffe43d38ae76fe2b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UA_NodeStore_release </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>managed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release a managed node. Do never insert a node that isn't stored in a namespace. </p>

</div>
</div>
<a class="anchor" id="ga6f17e438ced10fd4c1f035a930acd23a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a> UA_NodeStore_remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__types.html#structUA__NodeId">UA_NodeId</a> *&#160;</td>
          <td class="paramname"><em>nodeid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove a node from the namespace. Always succeeds, even if the node was not found. </p>

</div>
</div>
<a class="anchor" id="gac45871330d61a5cf82c53c93d9ce953e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ua__statuscodes_8h.html#a82f92964aaa5dd1c5a1c5d7e9099883c">UA_StatusCode</a> UA_NodeStore_replace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#ga6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>oldNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ua__nodes_8h.html#structUA__Node">UA_Node</a> **&#160;</td>
          <td class="paramname"><em>inserted</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Replace an existing node in the nodestore. If the node was already replaced, UA_STATUSCODE_BADINTERNALERROR is returned. If inserted is not NULL, a pointer to the managed (immutable) node is returned. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 10 2015 11:21:02 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
