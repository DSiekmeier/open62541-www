

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Types &mdash; open62541 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="open62541 1 documentation" href="index.html"/>
        <link rel="prev" title="Examining and interacting with node relations" href="tutorial_noderelations.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> open62541
          

          
            
            <img src="_static/open62541_html.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="in_a_nutshell.html">OPC UA in a nutshell</a></li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building the Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Data Types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-builtin-data-types">The builtin data types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ua-boolean">UA_Boolean</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-sbyte">UA_SByte</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-byte">UA_Byte</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-int16">UA_Int16</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-uint16">UA_UInt16</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-int32">UA_Int32</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-uint32">UA_UInt32</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-int64">UA_Int64</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-uint64">UA_UInt64</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-float">UA_Float</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-double">UA_Double</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-datetime">UA_DateTime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-guid">UA_Guid</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-string">UA_String</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-bytestring">UA_ByteString</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-xmleelement">UA_XmlEelement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-nodeid">UA_NodeId</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-expandednodeid">UA_ExpandedNodeId</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-qualifiedname">UA_QualifiedName</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-localizedtext">UA_LocalizedText</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-extensionobject">UA_ExtensionObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-variant">UA_Variant</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-datavalue">UA_DataValue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ua-diagnosticinfo">UA_DiagnosticInfo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generic-data-type-handling">Generic Data Type Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#array-handling">Array Handling</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">open62541</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Data Types</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/datatypes.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-types">
<h1>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In open62541, all data types share the same basic API for creation, copying and
deletion. The following functions are present for all data types <code class="docutils literal"><span class="pre">T</span></code>.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">void</span> <span class="pre">T_init(T</span> <span class="pre">*ptr)</span></code></dt>
<dd>Initialize the data type. This is synonymous with zeroing out the memory, i.e. <em>memset(dataptr, 0, sizeof(T))</em>.</dd>
<dt><code class="docutils literal"><span class="pre">T*</span> <span class="pre">T_new()</span></code></dt>
<dd>Allocate and return the memory for the data type. The memory is already initialized.</dd>
<dt><code class="docutils literal"><span class="pre">UA_StatusCode</span> <span class="pre">T_copy(const</span> <span class="pre">T</span> <span class="pre">*src,</span> <span class="pre">T</span> <span class="pre">*dst)</span></code></dt>
<dd>Copy the content of the data type. Returns <em>UA_STATUSCODE_GOOD</em> if it succeeded.</dd>
<dt><code class="docutils literal"><span class="pre">void</span> <span class="pre">T_deleteMembers(T</span> <span class="pre">*ptr)</span></code></dt>
<dd>Delete the dynamically allocated content of the data type, but not the data type itself.</dd>
<dt><code class="docutils literal"><span class="pre">void</span> <span class="pre">T_delete(T</span> <span class="pre">*ptr)</span></code></dt>
<dd>Delete the content of the data type and the memory for the data type itself.</dd>
</dl>
</div>
<div class="section" id="the-builtin-data-types">
<h2>The builtin data types<a class="headerlink" href="#the-builtin-data-types" title="Permalink to this headline">¶</a></h2>
<p>OPC UA defines 25 builtin data types. All other data types are combinations of
the 25 builtin data types.</p>
<div class="section" id="ua-boolean">
<h3>UA_Boolean<a class="headerlink" href="#ua-boolean" title="Permalink to this headline">¶</a></h3>
<p>A two-state logical value (true or false).</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">bool</span> <span class="n">UA_Boolean</span><span class="p">;</span>
<span class="cp">#define UA_TRUE true</span>
<span class="cp">#define UA_FALSE false</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-sbyte">
<h3>UA_SByte<a class="headerlink" href="#ua-sbyte" title="Permalink to this headline">¶</a></h3>
<p>An integer value between -128 and 127.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">int8_t</span> <span class="n">UA_SByte</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-byte">
<h3>UA_Byte<a class="headerlink" href="#ua-byte" title="Permalink to this headline">¶</a></h3>
<p>An integer value between 0 and 256.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">uint8_t</span> <span class="n">UA_Byte</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-int16">
<h3>UA_Int16<a class="headerlink" href="#ua-int16" title="Permalink to this headline">¶</a></h3>
<p>An integer value between -32,768 and 32,767.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">int16_t</span> <span class="n">UA_Int16</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-uint16">
<h3>UA_UInt16<a class="headerlink" href="#ua-uint16" title="Permalink to this headline">¶</a></h3>
<p>An integer value between 0 and 65,535.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">uint16_t</span> <span class="n">UA_UInt16</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-int32">
<h3>UA_Int32<a class="headerlink" href="#ua-int32" title="Permalink to this headline">¶</a></h3>
<p>An integer value between -2,147,483,648 and 2,147,483,647.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">int32_t</span> <span class="n">UA_Int32</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-uint32">
<h3>UA_UInt32<a class="headerlink" href="#ua-uint32" title="Permalink to this headline">¶</a></h3>
<p>An integer value between 0 and 4,294,967,295.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">uint32_t</span> <span class="n">UA_UInt32</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_UInt32.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cm">/* do not use for cryptographic entropy */</span>
<span class="n">UA_UInt32</span> <span class="nf">UA_UInt32_random</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-int64">
<h3>UA_Int64<a class="headerlink" href="#ua-int64" title="Permalink to this headline">¶</a></h3>
<p>An integer value between -10,223,372,036,854,775,808 and 9,223,372,036,854,775,807.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">int64_t</span> <span class="n">UA_Int64</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-uint64">
<h3>UA_UInt64<a class="headerlink" href="#ua-uint64" title="Permalink to this headline">¶</a></h3>
<p>An integer value between 0 and 18,446,744,073,709,551,615.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">uint64_t</span> <span class="n">UA_UInt64</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-float">
<h3>UA_Float<a class="headerlink" href="#ua-float" title="Permalink to this headline">¶</a></h3>
<p>An IEEE single precision (32 bit) floating point value.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">float</span> <span class="n">UA_Float</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-double">
<h3>UA_Double<a class="headerlink" href="#ua-double" title="Permalink to this headline">¶</a></h3>
<p>An IEEE double precision (64 bit) floating point value.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">double</span> <span class="n">UA_Double</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-datetime">
<h3>UA_DateTime<a class="headerlink" href="#ua-datetime" title="Permalink to this headline">¶</a></h3>
<p>An instance in time. A DateTime value is encoded as a 64-bit signed integer
which represents the number of 100 nanosecond intervals since January 1, 1601
(UTC).</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="n">UA_Int64</span> <span class="n">UA_DateTime</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_DateTime.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">UA_DateTime</span> <span class="nf">UA_DateTime_now</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">UA_DateTimeStruct</span> <span class="p">{</span>
    <span class="n">UA_UInt16</span> <span class="n">nanoSec</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">microSec</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">milliSec</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">sec</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">min</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">hour</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">day</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">month</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">year</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_DateTimeStruct</span><span class="p">;</span>

<span class="n">UA_DateTimeStruct</span> <span class="nf">UA_DateTime_toStruct</span><span class="p">(</span><span class="n">UA_DateTime</span> <span class="n">time</span><span class="p">);</span>

<span class="n">UA_String</span> <span class="nf">UA_DateTime_toString</span><span class="p">(</span><span class="n">UA_DateTime</span> <span class="n">time</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-guid">
<h3>UA_Guid<a class="headerlink" href="#ua-guid" title="Permalink to this headline">¶</a></h3>
<p>A 16 byte value that can be used as a globally unique identifier.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">UA_UInt32</span> <span class="n">data1</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">data2</span><span class="p">;</span>
    <span class="n">UA_UInt16</span> <span class="n">data3</span><span class="p">;</span>
    <span class="n">UA_Byte</span>   <span class="n">data4</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">UA_Guid</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_Guid.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">UA_Boolean</span> <span class="nf">UA_Guid_equal</span><span class="p">(</span><span class="k">const</span> <span class="n">UA_Guid</span> <span class="o">*</span><span class="n">g1</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_Guid</span> <span class="o">*</span><span class="n">g2</span><span class="p">);</span>

<span class="cm">/* do not use for cryptographic entropy */</span>
<span class="n">UA_Guid</span> <span class="nf">UA_Guid_random</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-string">
<h3>UA_String<a class="headerlink" href="#ua-string" title="Permalink to this headline">¶</a></h3>
<p>A sequence of Unicode characters. See also the section <a class="reference internal" href="#array-handling"><span>Array Handling</span></a> for
the usage of arrays in open62541.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">size_t</span> <span class="n">length</span><span class="p">;</span> <span class="c1">// The length of the string</span>
    <span class="n">UA_Byte</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span> <span class="c1">// The string&#39;s content (not null-terminated)</span>
<span class="p">}</span> <span class="n">UA_String</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_String.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">extern</span> <span class="k">const</span> <span class="n">UA_String</span> <span class="n">UA_STRING_NULL</span><span class="p">;</span>

<span class="n">UA_String</span> <span class="nf">UA_STRING</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>

<span class="cp">#define UA_STRING_ALLOC(CHARS) UA_String_fromChars(CHARS)</span>

<span class="cm">/** Copies the content on the heap. Returns a null-string when alloc fails */</span>
<span class="n">UA_String</span> <span class="nf">UA_String_fromChars</span><span class="p">(</span><span class="kt">char</span> <span class="k">const</span> <span class="n">src</span><span class="p">[]);</span>

<span class="n">UA_Boolean</span> <span class="nf">UA_String_equal</span><span class="p">(</span><span class="k">const</span> <span class="n">UA_String</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_String</span> <span class="o">*</span><span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p>Here&#8217;s a small example for the usage of UA_String.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cm">/* The definition of UA_String copied from ua_types.h */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">size_t</span> <span class="n">length</span><span class="p">;</span> <span class="c1">///&lt; The length of the string</span>
    <span class="n">UA_Byte</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span> <span class="c1">///&lt; The string&#39;s content (not null-terminated)</span>
<span class="p">}</span> <span class="n">UA_String</span><span class="p">;</span>

<span class="n">UA_String</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">UA_STRING</span><span class="p">(</span><span class="s">&quot;test1&quot;</span><span class="p">);</span>       <span class="cm">/* s1 points to the statically allocated string buffer */</span>
<span class="n">UA_String_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">);</span>                     <span class="cm">/* Reset s1 (no memleak due to the statically allocated buffer) */</span>

<span class="n">UA_String</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">UA_STRING_ALLOC</span><span class="p">(</span><span class="s">&quot;test2&quot;</span><span class="p">);</span> <span class="cm">/* s2 points to a new copy of the string buffer (with malloc) */</span>
<span class="n">UA_String_deleteMembers</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s2</span><span class="p">);</span>            <span class="cm">/* Free the content of s2, but not s2 itself */</span>

<span class="n">UA_String</span> <span class="o">*</span><span class="n">s3</span> <span class="o">=</span> <span class="n">UA_String_new</span><span class="p">();</span>         <span class="cm">/* The string s3 is malloced and initialized */</span>
<span class="o">*</span><span class="n">s3</span> <span class="o">=</span> <span class="n">UA_STRING_ALLOC</span><span class="p">(</span><span class="s">&quot;test3&quot;</span><span class="p">);</span>          <span class="cm">/* s3 points to a new copy of the string buffer */</span>

<span class="n">UA_String</span> <span class="n">s4</span><span class="p">;</span>
<span class="n">UA_copy</span><span class="p">(</span><span class="n">s3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">s4</span><span class="p">);</span>                        <span class="cm">/* Copy the content of s3 to s4 */</span>

<span class="n">UA_String_delete</span><span class="p">(</span><span class="n">s3</span><span class="p">);</span>                    <span class="cm">/* Free the string buffer and the string itself */</span>
<span class="n">UA_String_deleteMembers</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s4</span><span class="p">);</span>            <span class="cm">/* Again, delete only the string buffer */</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-bytestring">
<h3>UA_ByteString<a class="headerlink" href="#ua-bytestring" title="Permalink to this headline">¶</a></h3>
<p>A sequence of octets.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="n">UA_String</span> <span class="n">UA_ByteString</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-xmleelement">
<h3>UA_XmlEelement<a class="headerlink" href="#ua-xmleelement" title="Permalink to this headline">¶</a></h3>
<p>An XML element.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="n">UA_String</span> <span class="n">UA_XmlElement</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-nodeid">
<h3>UA_NodeId<a class="headerlink" href="#ua-nodeid" title="Permalink to this headline">¶</a></h3>
<p>An identifier for a node in the address space of an OPC UA Server.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">enum</span> <span class="n">UA_NodeIdType</span> <span class="p">{</span>
    <span class="n">UA_NODEIDTYPE_NUMERIC</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// On the wire, this can be 0, 1 or 2 (shortened numeric nodeids)</span>
    <span class="n">UA_NODEIDTYPE_STRING</span>     <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">UA_NODEIDTYPE_GUID</span>       <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">UA_NODEIDTYPE_BYTESTRING</span> <span class="o">=</span> <span class="mi">5</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">UA_UInt16</span> <span class="n">namespaceIndex</span><span class="p">;</span>
    <span class="k">enum</span> <span class="n">UA_NodeIdType</span> <span class="n">identifierType</span><span class="p">;</span>
    <span class="k">union</span> <span class="p">{</span>
        <span class="n">UA_UInt32</span>     <span class="n">numeric</span><span class="p">;</span>
        <span class="n">UA_String</span>     <span class="n">string</span><span class="p">;</span>
        <span class="n">UA_Guid</span>       <span class="n">guid</span><span class="p">;</span>
        <span class="n">UA_ByteString</span> <span class="n">byteString</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">identifier</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_NodeId</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_NodeId.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">UA_Boolean</span> <span class="nf">UA_NodeId_isNull</span><span class="p">(</span><span class="k">const</span> <span class="n">UA_NodeId</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>

<span class="n">UA_Boolean</span> <span class="nf">UA_NodeId_equal</span><span class="p">(</span><span class="k">const</span> <span class="n">UA_NodeId</span> <span class="o">*</span><span class="n">n1</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_NodeId</span> <span class="o">*</span><span class="n">n2</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">const</span> <span class="n">UA_NodeId</span> <span class="n">UA_NODEID_NULL</span><span class="p">;</span>

<span class="n">UA_NodeId</span> <span class="nf">UA_NODEID_NUMERIC</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="n">UA_Int32</span> <span class="n">identifier</span><span class="p">);</span>

<span class="n">UA_NodeId</span> <span class="nf">UA_NODEID_STRING</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">)</span> <span class="p">{</span>

<span class="n">UA_NodeId</span> <span class="n">UA_NODEID_STRING_ALLOC</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>

<span class="n">UA_NodeId</span> <span class="n">UA_NODEID_GUID</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="n">UA_Guid</span> <span class="n">guid</span><span class="p">);</span>

<span class="n">UA_NodeId</span> <span class="n">UA_NODEID_BYTESTRING</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>

<span class="n">UA_NodeId</span> <span class="n">UA_NODEID_BYTESTRING_ALLOC</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-expandednodeid">
<h3>UA_ExpandedNodeId<a class="headerlink" href="#ua-expandednodeid" title="Permalink to this headline">¶</a></h3>
<p>A NodeId that allows the namespace URI to be specified instead of an index.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">UA_NodeId</span> <span class="n">nodeId</span><span class="p">;</span>
    <span class="n">UA_String</span> <span class="n">namespaceUri</span><span class="p">;</span>
    <span class="n">UA_UInt32</span> <span class="n">serverIndex</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_ExpandedNodeId</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_ExpandedNodeId.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">UA_ExpandedNodeId</span> <span class="nf">UA_EXPANDEDNODEID_NUMERIC</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="n">UA_Int32</span> <span class="n">identifier</span><span class="p">);</span>

<span class="n">UA_ExpandedNodeId</span> <span class="nf">UA_EXPANDEDNODEID_STRING</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>

<span class="n">UA_ExpandedNodeId</span> <span class="nf">UA_EXPANDEDNODEID_STRING_ALLOC</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>

<span class="n">UA_ExpandedNodeId</span> <span class="nf">UA_EXPANDEDNODEID_STRING_GUID</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="n">UA_Guid</span> <span class="n">guid</span><span class="p">);</span>

<span class="n">UA_ExpandedNodeId</span> <span class="nf">UA_EXPANDEDNODEID_BYTESTRING</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>

<span class="n">UA_ExpandedNodeId</span> <span class="nf">UA_EXPANDEDNODEID_BYTESTRING_ALLOC</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-qualifiedname">
<h3>UA_QualifiedName<a class="headerlink" href="#ua-qualifiedname" title="Permalink to this headline">¶</a></h3>
<p>A name qualified by a namespace.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">UA_UInt16</span> <span class="n">namespaceIndex</span><span class="p">;</span>
    <span class="n">UA_String</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_QualifiedName</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_QualifiedName.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">UA_QualifiedName</span> <span class="nf">UA_QUALIFIEDNAME</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>

<span class="n">UA_QualifiedName</span> <span class="nf">UA_QUALIFIEDNAME_ALLOC</span><span class="p">(</span><span class="n">UA_UInt16</span> <span class="n">nsIndex</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chars</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-localizedtext">
<h3>UA_LocalizedText<a class="headerlink" href="#ua-localizedtext" title="Permalink to this headline">¶</a></h3>
<p>Human readable text with an optional locale identifier.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">UA_String</span> <span class="n">locale</span><span class="p">;</span>
    <span class="n">UA_String</span> <span class="n">text</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_LocalizedText</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_LocalizedText.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">UA_LocalizedText</span> <span class="nf">UA_LOCALIZEDTEXT</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">locale</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">text</span><span class="p">);</span>

<span class="n">UA_LocalizedText</span> <span class="nf">UA_LOCALIZEDTEXT_ALLOC</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">locale</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">text</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-extensionobject">
<h3>UA_ExtensionObject<a class="headerlink" href="#ua-extensionobject" title="Permalink to this headline">¶</a></h3>
<p>A structure that contains an application specific data type that may not be
recognized by the receiver.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="k">enum</span> <span class="p">{</span>
        <span class="n">UA_EXTENSIONOBJECT_ENCODED_NOBODY</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">UA_EXTENSIONOBJECT_ENCODED_BYTESTRING</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">UA_EXTENSIONOBJECT_ENCODED_XML</span>        <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">UA_EXTENSIONOBJECT_DECODED</span>            <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">///&lt; There is a pointer to the decoded data</span>
        <span class="n">UA_EXTENSIONOBJECT_DECODED_NODELETE</span>   <span class="o">=</span> <span class="mi">4</span>  <span class="c1">///&lt; Don&#39;t delete the decoded data at the lifecycle end</span>
    <span class="p">}</span> <span class="n">encoding</span><span class="p">;</span>
    <span class="k">union</span> <span class="p">{</span>
        <span class="k">struct</span> <span class="p">{</span>
            <span class="n">UA_NodeId</span> <span class="n">typeId</span><span class="p">;</span> <span class="c1">///&lt; The nodeid of the datatype</span>
            <span class="n">UA_ByteString</span> <span class="n">body</span><span class="p">;</span> <span class="c1">///&lt; The bytestring of the encoded data</span>
        <span class="p">}</span> <span class="n">encoded</span><span class="p">;</span>
        <span class="k">struct</span> <span class="p">{</span>
            <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">;</span>
            <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
        <span class="p">}</span> <span class="n">decoded</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">content</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_ExtensionObject</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-variant">
<h3>UA_Variant<a class="headerlink" href="#ua-variant" title="Permalink to this headline">¶</a></h3>
<p>Stores (arrays of) any data type. Please see section <a class="reference internal" href="#generic-handling"><span>Generic Data Type Handling</span></a> for
the usage of UA_DataType. The semantics of the arrayLength field is explained in
section <a class="reference internal" href="#array-handling"><span>Array Handling</span></a>.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">;</span> <span class="c1">// The data type description</span>
    <span class="k">enum</span> <span class="p">{</span>
        <span class="n">UA_VARIANT_DATA</span><span class="p">,</span>          <span class="cm">/* The data has the same lifecycle as the variant */</span>
        <span class="n">UA_VARIANT_DATA_NODELETE</span><span class="p">,</span> <span class="cm">/* The data is &quot;borrowed&quot; by the variant and shall not be</span>
<span class="cm">                                     deleted at the end of the variant&#39;s lifecycle. */</span>
    <span class="p">}</span> <span class="n">storageType</span><span class="p">;</span>
    <span class="kt">size_t</span> <span class="n">arrayLength</span><span class="p">;</span>  <span class="c1">// The number of elements in the data array</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span> <span class="c1">// Points to the scalar or array data</span>
    <span class="kt">size_t</span> <span class="n">arrayDimensionsSize</span><span class="p">;</span> <span class="c1">// The number of dimensions the data-array has</span>
    <span class="n">UA_UInt32</span> <span class="o">*</span><span class="n">arrayDimensions</span><span class="p">;</span> <span class="c1">// The length of each dimension of the data-array</span>
<span class="p">}</span> <span class="n">UA_Variant</span><span class="p">;</span>

<span class="cm">/* NumericRanges are used to indicate subsets of a (multidimensional) variant</span>
<span class="cm">* array. NumericRange has no official type structure in the standard. On the</span>
<span class="cm">* wire, it only exists as an encoded string, such as &quot;1:2,0:3,5&quot;. The colon</span>
<span class="cm">* separates min/max index and the comma separates dimensions. A single value</span>
<span class="cm">* indicates a range with a single element (min==max). */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">size_t</span> <span class="n">dimensionsSize</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">UA_NumericRangeDimension</span> <span class="p">{</span>
        <span class="n">UA_UInt32</span> <span class="n">min</span><span class="p">;</span>
        <span class="n">UA_UInt32</span> <span class="n">max</span><span class="p">;</span>
    <span class="p">}</span> <span class="o">*</span><span class="n">dimensions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_NumericRange</span><span class="p">;</span>
</pre></div>
</div>
<p>The following functions and definitions are used with UA_Variant.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cm">/**</span>
<span class="cm"> * Returns true if the variant contains a scalar value. Note that empty</span>
<span class="cm"> * variants contain an array of length -1 (undefined).</span>
<span class="cm"> *</span>
<span class="cm"> * @param v The variant</span>
<span class="cm"> * @return Does the variant contain a scalar value.</span>
<span class="cm"> */</span>
<span class="n">UA_Boolean</span> <span class="nf">UA_Variant_isScalar</span><span class="p">(</span><span class="k">const</span> <span class="n">UA_Variant</span> <span class="o">*</span><span class="n">v</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Set the variant to a scalar value that already resides in memory. The value</span>
<span class="cm"> * takes on the lifecycle of the variant and is deleted with it.</span>
<span class="cm"> *</span>
<span class="cm"> * @param v The variant</span>
<span class="cm"> * @param p A pointer to the value data</span>
<span class="cm"> * @param type The datatype of the value in question</span>
<span class="cm"> */</span>
<span class="n">UA_Variant_setScalar</span><span class="p">(</span><span class="n">UA_Variant</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">UA_RESTRICT</span> <span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Set the variant to a scalar value that is copied from an existing variable.</span>
<span class="cm"> *</span>
<span class="cm"> * @param v The variant</span>
<span class="cm"> * @param p A pointer to the value data</span>
<span class="cm"> * @param type The datatype of the value</span>
<span class="cm"> * @return Indicates whether the operation succeeded or returns an error code</span>
<span class="cm"> */</span>
<span class="n">UA_StatusCode</span> <span class="nf">UA_Variant_setScalarCopy</span><span class="p">(</span><span class="n">UA_Variant</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Set the variant to an array that already resides in memory. The array takes</span>
<span class="cm"> * on the lifecycle of the variant and is deleted with it.</span>
<span class="cm"> *</span>
<span class="cm"> * @param v The variant</span>
<span class="cm"> * @param array A pointer to the array data</span>
<span class="cm"> * @param arraySize The size of the array</span>
<span class="cm"> * @param type The datatype of the array</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">UA_Variant_setArray</span><span class="p">(</span><span class="n">UA_Variant</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">UA_RESTRICT</span> <span class="n">array</span><span class="p">,</span>
                         <span class="kt">size_t</span> <span class="n">arraySize</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Set the variant to an array that is copied from an existing array.</span>
<span class="cm"> *</span>
<span class="cm"> * @param v The variant</span>
<span class="cm"> * @param array A pointer to the array data</span>
<span class="cm"> * @param arraySize The size of the array</span>
<span class="cm"> * @param type The datatype of the array</span>
<span class="cm"> * @return Indicates whether the operation succeeded or returns an error code</span>
<span class="cm"> */</span>
<span class="n">UA_StatusCode</span> <span class="nf">UA_Variant_setArrayCopy</span><span class="p">(</span><span class="n">UA_Variant</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">array</span><span class="p">,</span>
                                      <span class="kt">size_t</span> <span class="n">arraySize</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Copy the variant, but use only a subset of the (multidimensional) array</span>
<span class="cm"> * into a variant. Returns an error code if the variant is not an array or if</span>
<span class="cm"> * the indicated range does not fit.</span>
<span class="cm"> *</span>
<span class="cm"> * @param src The source variant</span>
<span class="cm"> * @param dst The target variant</span>
<span class="cm"> * @param range The range of the copied data</span>
<span class="cm"> * @return Returns UA_STATUSCODE_GOOD or an error code</span>
<span class="cm"> */</span>
<span class="n">UA_StatusCode</span> <span class="nf">UA_Variant_copyRange</span><span class="p">(</span><span class="k">const</span> <span class="n">UA_Variant</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="n">UA_Variant</span> <span class="o">*</span><span class="n">dst</span><span class="p">,</span>
                                   <span class="k">const</span> <span class="n">UA_NumericRange</span> <span class="n">range</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Insert a range of data into an existing variant. The data array can&#39;t be</span>
<span class="cm"> * reused afterwards if it contains types without a fixed size (e.g. strings)</span>
<span class="cm"> * since the members are moved into the variant and take on its lifecycle.</span>
<span class="cm"> *</span>
<span class="cm"> * @param v The variant</span>
<span class="cm"> * @param dataArray The data array. The type must match the variant</span>
<span class="cm"> * @param dataArraySize The length of the data array. This is checked to match the range size.</span>
<span class="cm"> * @param range The range of where the new data is inserted</span>
<span class="cm"> * @return Returns UA_STATUSCODE_GOOD or an error code</span>
<span class="cm"> */</span>
<span class="n">UA_StatusCode</span> <span class="nf">UA_Variant_setRange</span><span class="p">(</span><span class="n">UA_Variant</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">UA_RESTRICT</span> <span class="n">array</span><span class="p">,</span>
                                  <span class="kt">size_t</span> <span class="n">arraySize</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_NumericRange</span> <span class="n">range</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Deep-copy a range of data into an existing variant.</span>
<span class="cm"> *</span>
<span class="cm"> * @param v The variant</span>
<span class="cm"> * @param dataArray The data array. The type must match the variant</span>
<span class="cm"> * @param dataArraySize The length of the data array. This is checked to match the range size.</span>
<span class="cm"> * @param range The range of where the new data is inserted</span>
<span class="cm"> * @return Returns UA_STATUSCODE_GOOD or an error code</span>
<span class="cm"> */</span>
<span class="n">UA_StatusCode</span> <span class="nf">UA_Variant_setRangeCopy</span><span class="p">(</span><span class="n">UA_Variant</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">array</span><span class="p">,</span>
                                      <span class="kt">size_t</span> <span class="n">arraySize</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_NumericRange</span> <span class="n">range</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-datavalue">
<h3>UA_DataValue<a class="headerlink" href="#ua-datavalue" title="Permalink to this headline">¶</a></h3>
<p>A data value with an associated status code and timestamps.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasValue</span>             <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasStatus</span>            <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasSourceTimestamp</span>   <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasServerTimestamp</span>   <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasSourcePicoseconds</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasServerPicoseconds</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Variant</span>    <span class="n">value</span><span class="p">;</span>
    <span class="n">UA_StatusCode</span> <span class="n">status</span><span class="p">;</span>
    <span class="n">UA_DateTime</span>   <span class="n">sourceTimestamp</span><span class="p">;</span>
    <span class="n">UA_Int16</span>      <span class="n">sourcePicoseconds</span><span class="p">;</span>
    <span class="n">UA_DateTime</span>   <span class="n">serverTimestamp</span><span class="p">;</span>
    <span class="n">UA_Int16</span>      <span class="n">serverPicoseconds</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_DataValue</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ua-diagnosticinfo">
<h3>UA_DiagnosticInfo<a class="headerlink" href="#ua-diagnosticinfo" title="Permalink to this headline">¶</a></h3>
<p>A structure that contains detailed error and diagnostic information associated
with a StatusCode.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">UA_DiagnosticInfo</span> <span class="p">{</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasSymbolicId</span>          <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasNamespaceUri</span>        <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasLocalizedText</span>       <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasLocale</span>              <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasAdditionalInfo</span>      <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasInnerStatusCode</span>     <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Boolean</span>    <span class="nl">hasInnerDiagnosticInfo</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">UA_Int32</span>      <span class="n">symbolicId</span><span class="p">;</span>
    <span class="n">UA_Int32</span>      <span class="n">namespaceUri</span><span class="p">;</span>
    <span class="n">UA_Int32</span>      <span class="n">localizedText</span><span class="p">;</span>
    <span class="n">UA_Int32</span>      <span class="n">locale</span><span class="p">;</span>
    <span class="n">UA_String</span>     <span class="n">additionalInfo</span><span class="p">;</span>
    <span class="n">UA_StatusCode</span> <span class="n">innerStatusCode</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">UA_DiagnosticInfo</span> <span class="o">*</span><span class="n">innerDiagnosticInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_DiagnosticInfo</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generic-data-type-handling">
<span id="generic-handling"></span><h2>Generic Data Type Handling<a class="headerlink" href="#generic-data-type-handling" title="Permalink to this headline">¶</a></h2>
<p>All standard-defined data types are described with an <code class="docutils literal"><span class="pre">UA_DataType</span></code> structure.
In addition to the 25 builtin data types, OPC UA defines many more. But they are
mere combinations of the builtin data types. We handle all types in a unified
way by storing their internal structure. So it is not necessary to define
specialized functions for all additional types.</p>
<p>The <code class="docutils literal"><span class="pre">UA_TYPES</span></code> array contains the description of every standard-defined data
type.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">extern</span> <span class="k">const</span> <span class="n">UA_DataType</span> <span class="n">UA_TYPES</span><span class="p">[</span><span class="n">UA_TYPES_COUNT</span><span class="p">];</span>
</pre></div>
</div>
<p>The following is an excerpt from <code class="docutils literal"><span class="pre">ua_types_generated.h</span></code> with the definition of
OPC UA read requests. This file is auto-generated from the XML-description of
the OPC UA data types that is part of the ISO/IEC 62541 standard.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">UA_RequestHeader</span> <span class="n">requestHeader</span><span class="p">;</span>
    <span class="n">UA_Double</span> <span class="n">maxAge</span><span class="p">;</span>
    <span class="n">UA_TimestampsToReturn</span> <span class="n">timestampsToReturn</span><span class="p">;</span>
    <span class="kt">size_t</span> <span class="n">nodesToReadSize</span><span class="p">;</span>
    <span class="n">UA_ReadValueId</span> <span class="o">*</span><span class="n">nodesToRead</span><span class="p">;</span>
<span class="p">}</span> <span class="n">UA_ReadRequest</span><span class="p">;</span>

<span class="cp">#define UA_TYPES_READREQUEST 118</span>

<span class="k">static</span> <span class="n">UA_INLINE</span> <span class="kt">void</span> <span class="nf">UA_ReadRequest_init</span><span class="p">(</span><span class="n">UA_ReadRequest</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">UA_ReadRequest</span><span class="p">));</span> <span class="p">}</span>

<span class="k">static</span> <span class="n">UA_INLINE</span> <span class="kt">void</span> <span class="nf">UA_ReadRequest_delete</span><span class="p">(</span><span class="n">UA_ReadRequest</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">UA_delete</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">UA_TYPES</span><span class="p">[</span><span class="n">UA_TYPES_READREQUEST</span><span class="p">]);</span> <span class="p">}</span>

<span class="k">static</span> <span class="n">UA_INLINE</span> <span class="kt">void</span> <span class="nf">UA_ReadRequest_deleteMembers</span><span class="p">(</span><span class="n">UA_ReadRequest</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">UA_deleteMembers</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">UA_TYPES</span><span class="p">[</span><span class="n">UA_TYPES_READREQUEST</span><span class="p">]);</span> <span class="p">}</span>

<span class="k">static</span> <span class="n">UA_INLINE</span> <span class="n">UA_ReadRequest</span> <span class="o">*</span> <span class="nf">UA_ReadRequest_new</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">UA_ReadRequest</span><span class="o">*</span><span class="p">)</span> <span class="n">UA_new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">UA_TYPES</span><span class="p">[</span><span class="n">UA_TYPES_READREQUEST</span><span class="p">]);</span> <span class="p">}</span>

<span class="k">static</span> <span class="n">UA_INLINE</span> <span class="n">UA_StatusCode</span>
<span class="nf">UA_ReadRequest_copy</span><span class="p">(</span><span class="k">const</span> <span class="n">UA_ReadRequest</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="n">UA_ReadRequest</span> <span class="o">*</span><span class="n">dst</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">UA_copy</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">UA_TYPES</span><span class="p">[</span><span class="n">UA_TYPES_READREQUEST</span><span class="p">]);</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="array-handling">
<span id="id1"></span><h2>Array Handling<a class="headerlink" href="#array-handling" title="Permalink to this headline">¶</a></h2>
<p>In OPC UA, all arrays can be undefined, have length 0 or a positive length. In
data structures, all arrays are represented by a <code class="docutils literal"><span class="pre">size_t</span></code> length field and an
appropriate pointer directly afterwards. In order to distinguish between
undefined and length-zero arrays, we define the following.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#define UA_EMPTY_ARRAY_SENTINEL ((void*)0x01)</span>
</pre></div>
</div>
<ul class="simple">
<li>size == 0 and data == NULL: The array is undefined</li>
<li>size == 0 and data == <code class="docutils literal"><span class="pre">UA_EMPTY_ARRAY_SENTINEL</span></code>: The array has length 0</li>
<li>size &gt; 0: The array at the given memory address has the given size</li>
</ul>
<p>The following functions are defined for array handling.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cm">/**</span>
<span class="cm"> * Allocates and initializes an array of variables of a specific type</span>
<span class="cm"> *</span>
<span class="cm"> * @param size The requested array length</span>
<span class="cm"> * @param type The datatype description</span>
<span class="cm"> * @return Returns the memory location of the variable or (void*)0 if no memory could be allocated</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="o">*</span> <span class="nf">UA_Array_new</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Allocates and copies an array. dst is set to (void*)0 if not enough memory is available.</span>
<span class="cm"> *</span>
<span class="cm"> * @param src The memory location of the source array</span>
<span class="cm"> * @param src_size The size of the array</span>
<span class="cm"> * @param dst The location of the pointer to the new array</span>
<span class="cm"> * @param type The datatype of the array members</span>
<span class="cm"> * @return Returns whether copying succeeded</span>
<span class="cm"> */</span>
<span class="n">UA_StatusCode</span> <span class="nf">UA_Array_copy</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">src_size</span><span class="p">,</span> <span class="kt">void</span> <span class="o">**</span><span class="n">dst</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Deletes an array.</span>
<span class="cm"> *</span>
<span class="cm"> * @param p The memory location of the array</span>
<span class="cm"> * @param size The size of the array</span>
<span class="cm"> * @param type The datatype of the array members</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">UA_Array_delete</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="k">const</span> <span class="n">UA_DataType</span> <span class="o">*</span><span class="n">type</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="tutorial_noderelations.html" class="btn btn-neutral" title="Examining and interacting with node relations" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, The open62541 authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>